LoadBalancer
========   
첫 문서 등록일시 : 2020-03-20 09:41   

[1. 개요][id]
[id]:#1
[2. 주요기능][id2]
[id2]:#2
[3. 로드밸런서의 장애 대비][id3]   
[id3]:#3

###1. 개요   

웹 서버는 모든 유저의 요청에 응답하려 하지만, 감당할 수 있는 요청의 수를 넘어버리면 서버가 비정상 종료되게 된다.   

서버가 요청을 감당  하지 못해 종료되는 현상을 해결하기 위해서   
1. Scale Up : 서버의 하드웨어 스펙을 올리는 방법   
2. Scale Out : 여러대의 서버로 나누어 요청을 처리하는 방법   

로드 밸런서는 그 중 Scale Out에서 사용되는,   
서버에서 발생하는 트래픽이 많을 때 여러대의 서버가 이러한 요청을 나누어 담당하여 서버의 로드율 증가, 부하량, 속도 등을   
고려해 적절하게 분산 처리하여 해결하는 서비스이다.   

###2. 주요기능   

**NAT(Network Address Translation)** : 사설 IP주소를 공인 IP 주소로 바꾸는 데 사용하는 통신망의 주소 변조기   
**Tunneling** : 인터넷 상에서 눈에 보이지 않는 파이프를 만들어 통신 할 수 있게 하는 개념   
데이터를 캡슐화하여 연결된 상호 간에만 패킷을 구별해 캡슐화를 해제할 수 있다.   
**DSR(Dynamic Source Routing Protocol)** : 로드 밸런서 사용 시 서버에서 클라이언트로 되돌아가는 경우 목적지 주소를 스위치의 IP 주소가 아닌 클라이언트의 IP주소로 찾아가는 개념이다.   

로드 밸런스 구조   
```
유저 ---- 인터넷 --- 로드 밸런서 --- [서버1, 서버2...]
```

로드 밸런스의 종류   

**L2** : MAC주소를 바탕으로 로드 밸런싱을 수행한다.   
**L3** : IP주소를 바탕으로 로드 밸런싱을 수행한다.   
**L4** : Transport Layer(IP와 Port) 레벨에서 로드 밸런싱을 수행한다. (TCP, UDP)   
**L7** : Application Layer 레벨에서 로드 밸런싱을 수행한다. (HTTP, HTTPS, FTP)   

###3. 로드 밸런서의 장애 대비   

로드 밸런서를 이중화하여 장애를 대비 할 수 있다.   
```
유저 --- 인터넷 --- [로드밸런서1, 로드밸런서2...]
```

이중화 된 로드 밸런서들은 서로 Health Check를 한다.   
메인 로드 밸런서가 동작하지 않게 되면 가상 IP는 서브 로드 밸런서로 변경되어 여분의 로드 밸런서로 운영하게 된다.


***
   마지막 문서 수정일시 : 2020-03-20 10:16